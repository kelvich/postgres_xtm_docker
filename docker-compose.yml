version: '2'
services:
  shard1:
    build: .
    environment:
      ROLE: 'shard'
      POSTGRES_USER: 'xtm'
  shard2:
    build: .
    environment:
      ROLE: 'shard'
      POSTGRES_USER: 'xtm'
  master:
    build: .
    environment:
      ROLE: 'master'
      POSTGRES_USER: 'xtm'
    ports:
      - "5432:5432"
    depends_on:
      - shard1
      - shard2
